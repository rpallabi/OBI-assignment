(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{1742:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return a(4811)}])},5872:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var r=a(5893),t=a(1664),c=a.n(t);function l(){return(0,r.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)(c(),{href:"/home",className:"navbar-brand",children:"E-Commerce"}),(0,r.jsx)("div",{className:"collapse navbar-collapse",children:(0,r.jsxs)("ul",{className:"navbar-nav ms-auto",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(c(),{href:"/products",className:"nav-link",children:"Products"})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(c(),{href:"/cart",className:"nav-link",children:"Cart"})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(c(),{href:"/history",className:"nav-link",children:"Order History"})})]})})]})})}},4811:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return n}});var r=a(5893),t=a(7294),c=a(7066),l=a(5872);function n(){let[e,s]=(0,t.useState)([]),[a,n]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=localStorage.getItem("cart");e&&(s(JSON.parse(e)),console.log("Cart loaded:",JSON.parse(e)));let a=sessionStorage.getItem("userData");if(a){let e=JSON.parse(a);n(e.id),console.log("User loaded:",e)}},[]);let i=async()=>{let r=e.map(e=>({productId:e.product.id,quantity:e.quantity}));try{await c.Z.post("http://localhost:3001/orders",{customerId:Number(a),items:r}),alert("Order placed successfully!"),localStorage.removeItem("cart"),s([])}catch(e){console.error("Checkout failed:",e),alert("Failed to place the order. Please try again.")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{}),(0,r.jsxs)("div",{className:"container mt-5",children:[(0,r.jsx)("h2",{className:"mb-4 text-center",children:"Your Shopping Cart"}),0===e.length?(0,r.jsx)("div",{className:"alert alert-info text-center",children:"Your cart is currently empty."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-4",children:e.map((e,s)=>(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"card h-100 shadow-sm",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:e.product.name}),(0,r.jsxs)("p",{className:"card-text mb-1",children:[(0,r.jsx)("strong",{children:"Product ID:"})," ",e.product.id]}),(0,r.jsxs)("p",{className:"card-text mb-1",children:[(0,r.jsx)("strong",{children:"Price:"})," â‚¹",e.product.price]}),(0,r.jsxs)("p",{className:"card-text mb-1",children:[(0,r.jsx)("strong",{children:"Stock Available:"})," ",e.product.stock]}),(0,r.jsxs)("p",{className:"card-text fw-bold text-success",children:["Quantity in Cart: ",e.quantity]})]})})},s))}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{className:"btn btn-lg btn-success px-5",onClick:i,children:"Checkout"})})]})]})]})}}},function(e){e.O(0,[66,664,888,774,179],function(){return e(e.s=1742)}),_N_E=e.O()}]);